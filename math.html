<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Buku Petunjuk — Analisis Matematika & Proyeksi Geometris</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/math.css">
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
    <div class="container">
        <header class="hero">
            <div>
                <h1>Buku Petunjuk — Analisis Matematika & Proyeksi Geometris</h1>
                <p>Mengupas bentuk, proporsi, dan proyeksi geometris Rumah Adat Bone dengan visual yang interaktif dan contoh perhitungan praktis.</p>
                        <div class="cta">
                            <a class="btn" href="article.html#pendahuluan">Baca Pendahuluan</a>
                            <a class="btn" href="vtour.html">Masuk Tur 360°</a>
                            <button id="themeToggle" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600">Toggle Tema</button>
                        </div>
            </div>
            <div class="card">
                <h3>Di halaman ini</h3>
                <ul class="note">
                    <li>Ringkasan geometri</li>
                    <li>Proyeksi tampak & pengukuran</li>
                    <li>Penghitung luas & volume</li>
                    <li>Galeri & contoh terapan</li>
                </ul>
            </div>
        </header>

        <section class="section">
            <div class="grid">
                <div class="card">
                    <h3>Simetri & Proporsi</h3>
                    <p>Rumah Bone menonjolkan simetri lipat vertikal dan pembagian rasio berdasarkan fungsional ruang. Pelajari rasio lebar:lensa:tangga.</p>
                </div>
                <div class="card">
                    <h3>Bentuk Atap — Timpa Laja</h3>
                    <p>Atap bertingkat (timpak) merepresentasikan derajat sosial sekaligus fungsi drainase. Kita dapat memodelkan tiap tingkat sebagai segitiga.</p>
                </div>
                <div class="card">
                    <h3>Pondasi Pallangga</h3>
                    <p>Pallangga — umpak trapesium yang mendistribusikan beban ke tanah. Contoh perhitungan luas & volume tersedia di bawah.</p>
                </div>

                <div class="card full">
                    <h3>Diagram Interaktif: Timpa Laja</h3>
                    <div class="diagram">
                        <!-- simple svg showing triangle roof and controls -->
                        <svg id="roofSvg" viewBox="0 0 600 220" width="100%" height="220" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="g1" x1="0" x2="1">
                                    <stop offset="0" stop-color="#2b6b85" />
                                    <stop offset="1" stop-color="#1f3b58" />
                                </linearGradient>
                            </defs>
                            <rect x="0" y="0" width="600" height="220" fill="transparent" />
                            <polygon id="roofPoly" points="50,180 300,40 550,180" fill="url(#g1)" stroke="#0f9" stroke-opacity="0.06" />
                            <text id="roofAreaTxt" x="300" y="115" fill="#e6eef3" font-size="14" text-anchor="middle"></text>
                        </svg>
                    </div>
                    <div class="controls">
                        <label class="note">Panjang alas (m): <input id="base" class="input" type="number" value="8" step="0.1"></label>
                        <label class="note">Tinggi (m): <input id="height" class="input" type="number" value="3" step="0.1"></label>
                        <button id="calcRoof" class="btn">Hitung Luas</button>
                    </div>
                    <div id="roofResult" class="result"></div>
                </div>

                <div class="card">
                    <h3>Pondasi — Pallangga (Trapesium)</h3>
                    <p>Hitung luas alas trapesium dan volume prisma.</p>
                    <div class="calc-row">
                        <input id="a" class="input" placeholder="Sisi sejajar a (cm)" type="number" value="40">
                        <input id="b" class="input" placeholder="Sisi sejajar b (cm)" type="number" value="60">
                        <input id="t" class="input" placeholder="Tinggi trapesium (cm)" type="number" value="30">
                        <input id="hPrisma" class="input" placeholder="Tinggi prisma (cm)" type="number" value="20">
                    </div>
                    <div style="margin-top:10px">
                        <button id="calcTrap" class="btn">Hitung Volume</button>
                        <div id="trapResult" class="result"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>Tiang (Balok)</h3>
                    <p>Volume balok: V = p × l × h</p>
                    <div class="calc-row">
                        <input id="p" class="input" placeholder="p (cm)" type="number" value="30">
                        <input id="l" class="input" placeholder="l (cm)" type="number" value="25">
                        <input id="h" class="input" placeholder="h (cm)" type="number" value="400">
                        <button id="calcBlock" class="btn">Hitung</button>
                    </div>
                    <div id="blockResult" class="result"></div>
                </div>

            </div>
        </section>

        <section class="section">
            <div class="card full">
                <h3>Galeri & Contoh Visual</h3>
                <div class="gallery">
                    <div class="thumb"><img src="assetes/360_images/image0.jpg" alt="panorama 0"></div>
                    <div class="thumb"><img src="assetes/360_images/image1.jpg" alt="panorama 1"></div>
                    <div class="thumb"><img src="assetes/images/main_img.jpg" alt="tampak depan"></div>
                </div>
                <p class="note">Klik gambar untuk memperbesar (fitur ringan).</p>
            </div>
        </section>

        <footer class="footer">© 2025 · Buku Petunjuk — Rumah Adat Bone</footer>
    </div>

    <script>
        // roof calculation (triangle area)
        function updateRoof() {
            const base = parseFloat(document.getElementById('base').value) || 0;
            const height = parseFloat(document.getElementById('height').value) || 0;
            const area = 0.5 * base * height;
            document.getElementById('roofResult').textContent = `Luas segitiga (Timpa Laja): ${area.toFixed(2)} m²`;
            // update svg scale: compute scale factor relative to base 8 -> 500px width
            const svg = document.getElementById('roofPoly');
            const svgBase = Math.min(Math.max(base,1),20); // clamp
            const leftX = 50;
            const rightX = 550;
            const midX = 300;
            // calculate left and right according to base proportion
            const half = (svgBase/8) * 250; // 8m => 250px half
            const points = `${midX-half},180 ${midX},${180 - (height/3)*40} ${midX+half},180`;
            svg.setAttribute('points', points);
            document.getElementById('roofAreaTxt').textContent = area.toFixed(2) + ' m²';
        }
        document.getElementById('calcRoof').addEventListener('click', updateRoof);
        updateRoof();

        // trapezium volume
        document.getElementById('calcTrap').addEventListener('click', function(){
            const a = parseFloat(document.getElementById('a').value) || 0;
            const b = parseFloat(document.getElementById('b').value) || 0;
            const t = parseFloat(document.getElementById('t').value) || 0;
            const h = parseFloat(document.getElementById('hPrisma').value) || 0;
            const L = 0.5 * (a + b) * t; // cm^2
            const V = L * h; // cm^3
            document.getElementById('trapResult').textContent = `Luas alas: ${L.toFixed(2)} cm² — Volume: ${V.toFixed(2)} cm³`;
        });

        // block volume
        document.getElementById('calcBlock').addEventListener('click', function(){
            const p = parseFloat(document.getElementById('p').value) || 0;
            const l = parseFloat(document.getElementById('l').value) || 0;
            const h = parseFloat(document.getElementById('h').value) || 0;
            const V = p * l * h;
            document.getElementById('blockResult').textContent = `Volume balok: ${V.toFixed(2)} cm³`;
        });

        // simple lightbox for thumbs
        document.querySelectorAll('.thumb img').forEach(img => {
            img.addEventListener('click', ()=>{
                const w = window.open('', '_blank');
                w.document.write(`<title>Pratinjau</title><img src="${img.src}" style="width:100%;height:auto">`);
            });
        });

                // Theme toggle: dark <-> light (store in localStorage)
                const themeToggle = document.getElementById('themeToggle');
                function applyThemeFromStorage(){
                    const t = localStorage.getItem('site-theme');
                    if(t === 'light') document.body.classList.add('light-theme');
                    else document.body.classList.remove('light-theme');
                    updateToggleLabel();
                }
                function updateToggleLabel(){
                    if(document.body.classList.contains('light-theme')) themeToggle.textContent = 'Tema Terang';
                    else themeToggle.textContent = 'Tema Gelap';
                }
                themeToggle.addEventListener('click', ()=>{
                    document.body.classList.toggle('light-theme');
                    const active = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                    localStorage.setItem('site-theme', active);
                    updateToggleLabel();
                });
                applyThemeFromStorage();
    </script>
</body>
</html>