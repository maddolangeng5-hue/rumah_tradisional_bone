<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Buku Petunjuk — Analisis Matematika & Proyeksi Geometris</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/math.css">
    <style>
        /* Variable-driven theme tuned for the screenshot (dark, narrow mobile column) */
        :root{
            --bg-1: #071226; /* deep navy */
            --bg-2: #06202b; /* slightly lighter */
            --card: rgba(255,255,255,0.02);
            --text: #e6eef3; /* pale text */
            --muted: rgba(230,238,243,0.55);
            --accent: #13c2ff; /* bright cyan pill buttons */
            --glass: rgba(255,255,255,0.02);
        }
        .light-theme{
            /* keep a working light override but not used by default */
            --bg-1: #f6f8fb;
            --bg-2: #ffffff;
            --card: rgba(2,6,23,0.03);
            --text: #0b1a22;
            --muted: rgba(11,26,34,0.6);
            --accent: #0b79f0;
            --glass: rgba(11,26,34,0.03);
        }

        html,body{ height:100%; margin:0 }
        body{
            background: linear-gradient(180deg,var(--bg-1),#021018);
            color:var(--text);
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
            line-height:1.45;
        }

        /* narrow, mobile-first column to match screenshot */
        .container{ max-width:360px; margin:18px auto; padding:12px; box-sizing:border-box }
        .top-divider{ display:none }

        /* hero: dark rounded card with blue accent buttons */
        .hero{ display:flex; flex-wrap:wrap; gap:14px; align-items:flex-start; justify-content:space-between; padding:14px; border-radius:12px; background: linear-gradient(180deg,#0b2a38,#08212b); box-shadow:0 10px 30px rgba(2,6,23,0.6); margin-bottom:12px }
        .hero > div:first-child{ flex:1 1 320px; min-width:220px }
        .hero .card{ flex:0 0 260px; min-width:200px }
    .hero h1{ margin:0 0 8px; font-size:18px; line-height:1.08 }
    .hero p{ margin:0 0 10px; color:var(--muted); font-size:13px }

    .cta{ display:flex; gap:8px; flex-wrap:wrap }
    /* cyan pill buttons with dark text like the screenshot */
    .btn{ background:var(--accent); color:#042033; padding:8px 12px; border-radius:999px; text-decoration:none; display:inline-block; font-weight:700; border: none; cursor:pointer; box-shadow:0 6px 18px rgba(11,194,255,0.08) }
    .btn:hover{ transform:translateY(-2px); filter:brightness(.98) }
    .btn.ghost{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04) }

        .grid{ display:grid; grid-template-columns: 1fr; gap:14px; align-items:start }
        @media(min-width:760px){ .grid{ grid-template-columns: repeat(2, 1fr) } .card.full{ grid-column: 1 / -1 } }

    .card{ background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); padding:12px; border-radius:10px; box-shadow:none; border:1px solid rgba(255,255,255,0.03) }
    .card h3{ margin:0 0 8px; font-size:13px; color:var(--muted); font-weight:700 }
    .card p{ margin:0 0 8px; font-size:13px; color:var(--muted) }

        .diagram{ padding:10px 0 }
        #roofSvg{ width:100%; height:auto; max-height:260px; display:block }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    .controls .note{ margin:0; font-size:13px; color:var(--muted) }
    .input{ padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:rgba(0,0,0,0.18); color:var(--text) }
    .result{ margin-top:8px; color: var(--accent); font-weight:700 }

        .calc-row{ display:flex; gap:8px; flex-wrap:wrap }
        .calc-row .input{ width:100px }

    .gallery{ display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap }
    .thumb{ cursor:pointer; width:100% }
    .thumb img{ width:100%; height:auto; max-width:320px; border-radius:6px; display:block; border:1px solid rgba(255,255,255,0.04) }

        .footer{ text-align:center; padding:18px 6px; margin-top:18px; color:var(--muted); font-size:13px }

        /* Lightbox */
        .lightbox{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.75); z-index:9999 }
        .lightbox .lb-inner{ position:relative; max-width:92vw; max-height:92vh }
        .lightbox img{ display:block; max-width:100%; max-height:100%; border-radius:8px }
        .lightbox .lb-close{ position:absolute; right:-8px; top:-8px; background:var(--accent); color:#fff; border-radius:50%; width:36px; height:36px; border:none; font-size:18px; cursor:pointer }

        /* Back button (fixed top-left) */
        .back-fixed{ position:fixed; left:12px; top:12px; z-index:1200 }
        .back-fixed a{ display:inline-block; background:rgba(0,0,0,0.36); color:var(--text); padding:8px 12px; border-radius:999px; text-decoration:none; font-weight:600; border:1px solid rgba(255,255,255,0.06) }

        /* Tighten mobile spacing */
        @media(max-width:480px){ .container{ padding:12px } .hero{ gap:12px } .hero .card{ flex-basis:220px } .btn{ padding:7px 10px } .thumb img{ width:110px; height:72px } #roofSvg{ max-height:180px } }
    </style>
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
    <div class="back-fixed"><a href="index.html" aria-label="Kembali ke Beranda">← Kembali ke Beranda</a></div>
    <div class="container">
        <header class="hero">
            <div>
                <h1>Buku Petunjuk — Analisis Matematika & Proyeksi Geometris</h1>
                <p>Mengupas bentuk, proporsi, dan proyeksi geometris Rumah Adat Bone dengan visual yang interaktif dan contoh perhitungan praktis.</p>
                        <div class="cta">
                            <a class="btn" href="article.html#pendahuluan">Baca Pendahuluan</a>
                            <a class="btn" href="vtour.html">Masuk Tur 360°</a>
                            <button id="themeToggle" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600">Toggle Tema</button>
                        </div>
            </div>
            <div class="card">
                <h3>Di halaman ini</h3>
                <ul class="note">
                    <li>Ringkasan geometri</li>
                    <li>Proyeksi tampak & pengukuran</li>
                    <li>Penghitung luas & volume</li>
                    <li>Galeri & contoh terapan</li>
                </ul>
            </div>
        </header>

        <section class="section">
            <div class="grid">
                <div class="card">
                    <h3>Simetri & Proporsi</h3>
                    <p>Rumah Bone menonjolkan simetri lipat vertikal dan pembagian rasio berdasarkan fungsional ruang. Pelajari rasio lebar:lensa:tangga.</p>
                </div>
                <div class="card">
                    <h3>Bentuk Atap — Timpa Laja</h3>
                    <p>Atap bertingkat (timpak) merepresentasikan derajat sosial sekaligus fungsi drainase. Kita dapat memodelkan tiap tingkat sebagai segitiga.</p>
                </div>
                <div class="card">
                    <h3>Pondasi Pallangga</h3>
                    <p>Pallangga — umpak trapesium yang mendistribusikan beban ke tanah. Contoh perhitungan luas & volume tersedia di bawah.</p>
                </div>

                <div class="card full">
                    <h3>Diagram Interaktif: Timpa Laja</h3>
                    <div class="diagram">
                        <!-- simple svg showing triangle roof and controls -->
                        <svg id="roofSvg" viewBox="0 0 600 220" width="100%" height="220" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="g1" x1="0" x2="1">
                                    <stop offset="0" stop-color="#2b6b85" />
                                    <stop offset="1" stop-color="#1f3b58" />
                                </linearGradient>
                            </defs>
                            <rect x="0" y="0" width="600" height="220" fill="transparent" />
                            <polygon id="roofPoly" points="50,180 300,40 550,180" fill="url(#g1)" stroke="#0f9" stroke-opacity="0.06" />
                            <text id="roofAreaTxt" x="300" y="115" fill="#e6eef3" font-size="14" text-anchor="middle"></text>
                        </svg>
                    </div>
                    <div class="controls">
                        <label class="note">Panjang alas (m): <input id="base" class="input" type="number" value="8" step="0.1"></label>
                        <label class="note">Tinggi (m): <input id="height" class="input" type="number" value="3" step="0.1"></label>
                        <button id="calcRoof" class="btn">Hitung Luas</button>
                    </div>
                    <div id="roofResult" class="result"></div>
                </div>

                <div class="card">
                    <h3>Pondasi — Pallangga (Trapesium)</h3>
                    <p>Hitung luas alas trapesium dan volume prisma.</p>
                    <div class="calc-row">
                        <input id="a" class="input" placeholder="Sisi sejajar a (cm)" type="number" value="40">
                        <input id="b" class="input" placeholder="Sisi sejajar b (cm)" type="number" value="60">
                        <input id="t" class="input" placeholder="Tinggi trapesium (cm)" type="number" value="30">
                        <input id="hPrisma" class="input" placeholder="Tinggi prisma (cm)" type="number" value="20">
                    </div>
                    <div style="margin-top:10px">
                        <button id="calcTrap" class="btn">Hitung Volume</button>
                        <div id="trapResult" class="result"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>Tiang (Balok)</h3>
                    <p>Volume balok: V = p × l × h</p>
                    <div class="calc-row">
                        <input id="p" class="input" placeholder="p (cm)" type="number" value="30">
                        <input id="l" class="input" placeholder="l (cm)" type="number" value="25">
                        <input id="h" class="input" placeholder="h (cm)" type="number" value="400">
                        <button id="calcBlock" class="btn">Hitung</button>
                    </div>
                    <div id="blockResult" class="result"></div>
                </div>

            </div>
        </section>

        <section class="section">
            <div class="card full">
                <h3>Galeri & Contoh Visual</h3>
                <div class="gallery">
                    <div class="thumb"><img src="assetes/360_images/image0.jpg" alt="panorama 0"></div>
                    <div class="thumb"><img src="assetes/360_images/image1.jpg" alt="panorama 1"></div>
                    <div class="thumb"><img src="assetes/images/main_img.jpg" alt="tampak depan"></div>
                </div>
                <p class="note">Klik gambar untuk memperbesar (fitur ringan).</p>
            </div>
        </section>

        <footer class="footer">© 2025 · Buku Petunjuk — Rumah Adat Bone</footer>
    </div>

    <script>
        // roof calculation (triangle area)
        function updateRoof() {
            const base = parseFloat(document.getElementById('base').value) || 0;
            const height = parseFloat(document.getElementById('height').value) || 0;
            const area = 0.5 * base * height;
            document.getElementById('roofResult').textContent = `Luas segitiga (Timpa Laja): ${area.toFixed(2)} m²`;
            // update svg scale: compute scale factor relative to base 8 -> 500px width
            const svg = document.getElementById('roofPoly');
            const svgBase = Math.min(Math.max(base,1),20); // clamp
            const leftX = 50;
            const rightX = 550;
            const midX = 300;
            // calculate left and right according to base proportion
            const half = (svgBase/8) * 250; // 8m => 250px half
            const points = `${midX-half},180 ${midX},${180 - (height/3)*40} ${midX+half},180`;
            svg.setAttribute('points', points);
            document.getElementById('roofAreaTxt').textContent = area.toFixed(2) + ' m²';
        }
        document.getElementById('calcRoof').addEventListener('click', updateRoof);
        updateRoof();

        // trapezium volume
        document.getElementById('calcTrap').addEventListener('click', function(){
            const a = parseFloat(document.getElementById('a').value) || 0;
            const b = parseFloat(document.getElementById('b').value) || 0;
            const t = parseFloat(document.getElementById('t').value) || 0;
            const h = parseFloat(document.getElementById('hPrisma').value) || 0;
            const L = 0.5 * (a + b) * t; // cm^2
            const V = L * h; // cm^3
            document.getElementById('trapResult').textContent = `Luas alas: ${L.toFixed(2)} cm² — Volume: ${V.toFixed(2)} cm³`;
        });

        // block volume
        document.getElementById('calcBlock').addEventListener('click', function(){
            const p = parseFloat(document.getElementById('p').value) || 0;
            const l = parseFloat(document.getElementById('l').value) || 0;
            const h = parseFloat(document.getElementById('h').value) || 0;
            const V = p * l * h;
            document.getElementById('blockResult').textContent = `Volume balok: ${V.toFixed(2)} cm³`;
        });

        // lightbox (modal) for thumbs
        (function(){
            function openLightbox(src, alt){
                let lb = document.getElementById('lightbox');
                if(!lb){
                    lb = document.createElement('div'); lb.id = 'lightbox'; lb.className = 'lightbox';
                    lb.innerHTML = '<div class="lb-inner"><img src="" alt=""><button class="lb-close" aria-label="Tutup">×</button></div>';
                    document.body.appendChild(lb);
                    lb.querySelector('.lb-close').addEventListener('click', closeLightbox);
                    lb.addEventListener('click', function(e){ if(e.target === lb) closeLightbox(); });
                }
                lb.querySelector('img').src = src;
                lb.querySelector('img').alt = alt || '';
                lb.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
            function closeLightbox(){ const lb = document.getElementById('lightbox'); if(lb){ lb.style.display = 'none'; document.body.style.overflow = ''; } }
            document.querySelectorAll('.thumb img').forEach(img => img.addEventListener('click', ()=> openLightbox(img.src, img.alt)));
            // expose close in case other scripts need it
            window.closeLightbox = closeLightbox;
        })();

        // Theme toggle: dark <-> light (store in localStorage)
        const themeToggle = document.getElementById('themeToggle');
        function applyThemeFromStorage(){
            const t = localStorage.getItem('site-theme');
            if(t === 'light') document.body.classList.add('light-theme');
            else document.body.classList.remove('light-theme');
            updateToggleLabel();
        }
        function updateToggleLabel(){
            if(!themeToggle) return;
            if(document.body.classList.contains('light-theme')) themeToggle.textContent = 'Tema Terang';
            else themeToggle.textContent = 'Tema Gelap';
        }
        if(themeToggle){
            themeToggle.addEventListener('click', ()=>{
                document.body.classList.toggle('light-theme');
                const active = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                localStorage.setItem('site-theme', active);
                updateToggleLabel();
            });
        }
        applyThemeFromStorage();
    </script>
</body>
</html>